<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Inodes &amp; Links</title>
<link href="../../assets/css/style.css" rel="stylesheet"/>
<script defer="" src="../../assets/js/main.js"></script>
<meta content="Inodes &amp; Links" property="og:title"/><meta content="summary" name="twitter:card"/></head>
<body>
<header class="site-header">
<div class="container">
<h1>Linux Lernportal</h1>
<nav class="top-nav">
<a href="../../index.html">Start</a>
<a class="active" href="../index.html">LPIC-1</a>
<a class="disabled" href="#" title="Bald verfügbar">LPIC-2</a>
<a class="disabled" href="#" title="Bald verfügbar">LPIC-3</a>
<a href="../../search.html">Suche</a><a href="../../lpic-1/glossar.html">Glossar</a><button class="btn" id="themeToggle">🌓</button>
</nav>
</div>
</header>
<main class="container">
<div class="breadcrumbs"><a href="../../index.html">Start</a> ▸ <a href="../index.html">LPIC‑1</a> ▸ <a href="../dateisysteme-fhs.html">Dateisysteme &amp; FHS</a> ▸ Inodes &amp; Links</div>
<h2>Inodes &amp; Links</h2>
<div class="layout">
<aside class="sidebar card">
<h3>Unterthemen</h3>
<div class="card-body">
<nav class="toc">
<a href="fhs.html">FHS Überblick</a>
<a href="mount-und-fstab.html">Mount &amp; /etc/fstab</a>
<a href="dateisystem-werkzeuge.html">Dateisystem‑Werkzeuge</a>
<a href="dateisystem-typen.html">Dateisystem‑Typen</a>
<a href="speicheranalyse.html">Speicheranalyse</a>
<a class="active" href="inodes-und-links.html">Inodes &amp; Links</a>
<a href="quotas.html">Quotas</a>
<a href="partitionen-und-swap.html">Partitionen &amp; Swap</a>
<a href="labels-und-uuid.html">Labels &amp; UUID</a>
<a href="mount-optionen-und-sicherheit.html">Mount‑Optionen &amp; Sicherheit</a>
<a href="dateisystem-attribute.html">Dateisystem‑Attribute</a>
<a href="tmpfs-und-bind-mounts.html">tmpfs &amp; Bind‑Mounts</a>
</nav>
</div>
</aside>
<article class="content">
<div class="card block"><h3>Lernziele</h3><div class="card-body"><ul><li>Inode‑Konzept, Hard‑ vs. Symlinks verstehen.</li></ul></div></div>
<div class="card block"><h3>Cheatsheet</h3><div class="card-body"><pre><code>ln file hardlink
ln -s target symlink
stat file
</code></pre></div></div>
<div class="card block"><h3>Theorie</h3><div class="card-body">
<ul>
<li><strong>Inode:</strong> Metadaten (Owner, Mode, Timestamps, Größe, Blockzeiger), aber nicht der Dateiname.</li>
<li><strong>Hardlink:</strong> Weitere Verzeichnis‑Einträge, die auf denselben Inode zeigen. Gleichwertig zum Original.</li>
<li><strong>Symlink:</strong> Separater Inode mit Pfadreferenz (Text). Kann ins Leere zeigen („dangling“).</li>
<li><strong>Link‑Count:</strong> <code>stat</code> zeigt die Anzahl von Hardlinks auf einen Inode.</li>
<li><strong>Grenzen:</strong> Hardlinks nur innerhalb desselben Dateisystems, nicht auf Verzeichnisse (außer Spezialfälle).</li>
</ul>
</div></div>
<div class="card block"><h3>Theorie (Vertiefung)</h3><div class="card-body"><ul>
<li><strong>Dateiname ≠ Datei:</strong> Namen liegen in Verzeichnissen; der Inode repräsentiert die Datei. Löschen entfernt nur den Verzeichniseintrag.</li>
<li><strong>Verzeichnisse:</strong> besitzen mind. 2 Links (<code>.</code> und Eintrag in Eltern <code>..</code>). <code>st_nlink</code> zählt Unterverzeichnisse+2.</li>
<li><strong>Timestamps:</strong> <code>atime</code>, <code>mtime</code>, <code>ctime</code> (Metadaten‑Änderung, nicht „creation“). Moderne FS haben <code>crtime</code> optional.</li>
<li><strong>Reflinks vs. Hardlinks:</strong> Reflinks (CoW, z. B. XFS/Btrfs) teilen Datenblöcke copy‑on‑write, Hardlinks teilen den gleichen Inode.</li>
<li><strong>Symlinkauflösung:</strong> Kernel folgt Symlinks bis zu einem Limit; absolute vs. relative Ziele beachten.</li>
</ul></div></div>
<div class="card block"><h3>Praxis</h3><div class="card-body"><pre><code># Hard‑ und Symlinks anlegen
ln original.txt kopie.hl
ln -s /var/log/syslog syslog.link

# Eigenschaften prüfen
ls -li original.txt kopie.hl syslog.link
stat original.txt

# Datei löschen: Inhalt bleibt bis letzter Hardlink entfernt ist
rm original.txt   # kopie.hl zeigt weiterhin auf die Daten

# Nach Inode suchen
stat kopie.hl | awk '/Inode/{print $2}'
find . -xdev -inum INODE -ls
</code></pre></div></div>
<div class="card block"><h3>Praxis (Fortgeschritten)</h3><div class="card-body"><pre><code># Inodes zählen / Inode‑Erschöpfung erkennen
df -i

# Alle Hardlinks zu einer Datei finden
find / -xdev -samefile kopie.hl -printf '%i %p\n' 2&gt;/dev/null

# Reflink (CoW) statt vollständiger Kopie, wenn unterstützt (XFS/Btrfs)
cp --reflink=auto große_datei img_copy

# Symlink atomar aktualisieren (Downtime minimal)
ln -sfn /opt/app/releases/2024-10-01 /opt/app/current

# Dangling Symlinks aufspüren
find /path -xtype l -print

# Tar/Backup: Symlinks nicht dereferenzieren
tar -cf backup.tar --no-dereference /pfad
</code></pre></div></div>
<div class="card block"><h3>Best Practices</h3><div class="card-body"><ul>
<li><strong>Symlinks für Pfadumleitungen:</strong> Stabilere Pfade/Kompatibilitätsschichten bereitstellen.</li>
<li><strong>Hardlinks sparsam:</strong> Verwirrung vermeiden; für Deduplizierung/Snapshots gezielt nutzen.</li>
<li><strong>Backups beachten:</strong> Tools sollen Links korrekt behandeln (Optionen für Symlinks/Hardlinks prüfen).</li>
</ul></div></div>
<div class="card block"><h3>Sicherheit</h3><div class="card-body"><ul>
<li><strong>Symlink‑Race vermeiden:</strong> Beim Schreiben in welt‑schreibbare Verzeichnisse (z. B. <code>/tmp</code>) sichere Patterns nutzen (<code>mktemp</code>, O_NOFOLLOW).</li>
<li><strong>Sticky Bit in /tmp:</strong> Schützt vor unbefugtem Löschen fremder Dateien in 1777‑Verzeichnissen.</li>
<li><strong>Backups:</strong> Symlinks nicht ungewollt dereferenzieren (<code>--no-dereference</code>), um Pfad‑Sprünge zu verhindern.</li>
<li><strong>Chroot/Container:</strong> Relative Symlinks bevorzugen, damit Pfade im Jail gültig bleiben.</li>
</ul></div></div>
<div class="card block"><h3>Erweitertes Cheatsheet</h3><div class="card-body"><pre><code># Symlinkziel anzeigen/ändern
readlink -f syslog.link
ln -sfn /neuer/pfad syslog.link   # atomar ersetzen

# Hardlinks zählen
find . -xdev -samefile kopie.hl | wc -l

# Symlinks folgen oder nicht
cp -a      # bewahrt Symlinks
cp -L      # folgt Symlinks (kopiert Ziel)
</code></pre></div></div>
<div class="card block"><h3>Fehlersuche</h3><div class="card-body"><ul>
<li><strong>Datei gelöscht aber belegt:</strong> <code>lsof +L1</code> zeigt offene, gelöschte Dateien; Dienst neu starten, um Platz freizugeben.</li>
<li><strong>Inodes alle:</strong> Viele kleine Dateien; mit <code>df -i</code> checken, Verursacher suchen und aufräumen.</li>
<li><strong>Symlink‑Schleifen:</strong> <code>find -L</code> bricht Schleifen, Logs prüfen; Ziele korrigieren.</li>
<li><strong>Operation not permitted / Cross‑device:</strong> Hardlinks gehen nicht über Dateisystemgrenzen; stattdessen Symlink/Reflink.</li>
</ul></div></div>
</article></div>
<div class="card block"><h3>Übungen</h3><div class="card-body"><ol>
<li>Erstelle 2 Hardlinks auf eine Datei und demonstriere den unveränderten Inode bei Umbenennung/Löschen.</li>
<li>Lege Symlinks mit relativen und absoluten Pfaden an und beobachte das Verhalten nach Verschiebung.</li>
<li>Finde alle Hardlinks zu einer Datei mittels <code>-samefile</code> und verifiziere die Link‑Anzahl.</li>
</ol></div></div>
<div class="card block"><h3>Weitere Übungen</h3><div class="card-body"><ol>
<li>Demonstriere „deleted but open“: Erzeuge große Logdatei, lösche sie während ein Prozess schreibt, beobachte <code>lsof +L1</code>.</li>
<li>Vergleiche Zeit/Platz von Kopie vs. Reflink auf XFS oder Btrfs (<code>cp --reflink=auto</code>).</li>
<li>Erzeuge einen Symlink‑Loop im Lab und zeige, wie Tools darauf reagieren (<code>find -L</code>, <code>rsync -a</code>).</li>
</ol></div></div>
<div class="card block"><h3>Zusätzliche Prüfungsfragen</h3><div class="card-body"><ol>
<li>Warum können Hardlinks nicht über Dateisystemgrenzen hinweg erstellt werden?</li>
<li>Wie unterscheidet <code>ls -l</code> eine reguläre Datei, einen Hardlink und einen Symlink?</li>
<li>Welche Auswirkungen hat das Löschen des „Originals“ bei Hardlink‑Szenarien?</li>
<li>Welche Unterschiede bestehen zwischen <code>mtime</code>, <code>ctime</code> und <code>atime</code>?</li>
<li>Wann sind Reflinks sinnvoll und wie unterscheiden sie sich von Hardlinks?</li>
</ol></div></div>
<div class="card" id="progressWidget"><div class="card-body"><h3>Kapitel abschließen</h3><p class="muted">Hake dieses Kapitel als erledigt ab. Dein Fortschritt wird nur lokal im Browser gespeichert.</p><label class="checkbox"><input id="pageComplete" type="checkbox"/> Ich habe dieses Kapitel verstanden</label><p><a href="../../lpic-1/fortschritt.html">Zu meinem Fortschritt</a></p></div></div><div class="card"><div class="card-body"><h3>Vertiefung &amp; Praxis</h3><p><strong>Vertiefung:</strong> Wichtige Praxisaspekte und Prüfungsbezug.</p>
<ul><li>Relevante Manpages, typische Optionen und Nebeneffekte.</li><li>Praxisübung in einer frischen VM; Änderungen reproduzierbar dokumentieren.</li><li>Prüfungsszenarien mit Stolpersteinen und Zeitspar‑Tricks.</li></ul></div></div><div class="card"><div class="card-body"><h3>Checkliste – schneller Durchblick</h3>
<ul>
<li>Relevante Logdateien geprüft? (<code>journalctl</code>, <code>/var/log/*</code>)</li>
<li>Manpage/--help gelesen und Option bewusst gewählt?</li>
<li>Rechte/Ownership/SELinux/AppArmor berücksichtigt?</li>
<li>Distribution &amp; Version: gleiches Verhalten verifiziert?</li>
</ul>
</div></div><div class="card"><div class="card-body"><h3>Prüfungsfragen (MC)</h3><h3>Quiz – Selbsttest</h3><div class="card"><div class="card-body"><p><strong>Frage:</strong> Welche Manpage zeigt Synopsis &amp; Optionen eines Befehls?</p><ol><li><strong>A.</strong> info</li><li><strong>B.</strong> help</li><li><strong>C.</strong> man</li><li><strong>D.</strong> what</li></ol><details><summary>Lösung anzeigen</summary><p><strong>Richtig:</strong> C. man ist Standardreferenz.</p></details></div></div></div></div><div class="card"><div class="card-body"><h3>Optionen‑Atlas (Kernbefehle)</h3><table><tr><th>Kommando</th><th>Wichtige Optionen</th></tr><tr><td><code>man</code></td><td>man 1 chmod; man -k KEYWORD; /Suchbegriff; n weiter</td></tr>
<tr><td><code>help</code></td><td>Bash builtins: help test; type zeigt Herkunft</td></tr>
<tr><td><code>info</code></td><td>Detailierte Doku via Info-Seiten</td></tr></table></div></div><div class="card"><div class="card-body"><h3>Szenarien aus der Praxis</h3><ul><li>Manpages effektiv: SYNOPSIS → Optionen → EXAMPLES; eigene Notizen ans Ende der Seite.</li>
<li>Vor Änderung: Backup der Konfig und später diff zum Vergleichen.</li>
<li>Alle Schritte in Readme im Repo dokumentieren (Wiederholbarkeit).</li></ul></div></div><div class="card"><div class="card-body"><h3>Diagnose-Flow (schneller Pfad zur Lösung)</h3><ol><li>Reproduktion in frischer VM möglich?</li>
<li>Änderung minimal &amp; dokumentiert?</li>
<li>Fallback/Backout‑Plan vorhanden?</li>
<li>Security‑Implikationen bedacht?</li></ol></div></div><div class="card"><div class="card-body"><h3>Erweiterte Übungen</h3><p>Bearbeite die Aufgaben, dokumentiere die Schritte und vergleiche die Ergebnisse mit den Erwartungen. Nutze eine frische VM für reproduzierbare Ergebnisse.</p><ol><li>Manpages effektiv: SYNOPSIS → Optionen → EXAMPLES; eigene Notizen ans Ende der Seite. – <em>liefere Befehle, Begründung und Nachweise (Logs/Outputs)</em>.</li><li>Vor Änderung: Backup der Konfig und später diff zum Vergleichen. – <em>liefere Befehle, Begründung und Nachweise (Logs/Outputs)</em>.</li><li>Alle Schritte in Readme im Repo dokumentieren (Wiederholbarkeit). – <em>liefere Befehle, Begründung und Nachweise (Logs/Outputs)</em>.</li></ol></div></div><div class="card"><div class="card-body"><h3>Cheatsheet – erweitert</h3><pre><code># Nützliche Helfer
man -k backup
type chmod
info coreutils 'File permissions'</code></pre></div></div><div class="card" id="prevnext"><div class="card-body"><h3>Weiter navigieren</h3><p><a href="fhs.html" rel="prev">← Vorherige Seite</a> · <a href="labels-und-uuid.html" rel="next">Nächste Seite →</a></p></div></div></main>
<footer class="site-footer"><div class="container"><span>© Linux Lernportal</span></div></footer>
</body>
</html>
