<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Inodes &amp; Links</title>
<link href="../../assets/css/style.css" rel="stylesheet"/>
<script defer="" src="../../assets/js/main.js"></script>
<meta content="Inodes &amp; Links" property="og:title"/><meta content="summary" name="twitter:card"/></head>
<body>
<header class="site-header">
<div class="container">
<h1>Linux Lernportal</h1>
<nav class="top-nav">
<a href="../../index.html">Start</a>
<a class="active" href="../index.html">LPIC-1</a>
<a class="disabled" href="#" title="Bald verfÃ¼gbar">LPIC-2</a>
<a class="disabled" href="#" title="Bald verfÃ¼gbar">LPIC-3</a>
<a href="../../search.html">Suche</a><a href="../../lpic-1/glossar.html">Glossar</a><button class="btn" id="themeToggle">ğŸŒ“</button>
</nav>
</div>
</header>
<main class="container">
<div class="breadcrumbs"><a href="../../index.html">Start</a> â–¸ <a href="../index.html">LPICâ€‘1</a> â–¸ <a href="../dateisysteme-fhs.html">Dateisysteme &amp; FHS</a> â–¸ Inodes &amp; Links</div>
<h2>Inodes &amp; Links</h2>
<div class="layout">
<aside class="sidebar card">
<h3>Unterthemen</h3>
<div class="card-body">
<nav class="toc">
<a href="fhs.html">FHS Ãœberblick</a>
<a href="mount-und-fstab.html">Mount &amp; /etc/fstab</a>
<a href="dateisystem-werkzeuge.html">Dateisystemâ€‘Werkzeuge</a>
<a href="dateisystem-typen.html">Dateisystemâ€‘Typen</a>
<a href="speicheranalyse.html">Speicheranalyse</a>
<a class="active" href="inodes-und-links.html">Inodes &amp; Links</a>
<a href="quotas.html">Quotas</a>
<a href="partitionen-und-swap.html">Partitionen &amp; Swap</a>
<a href="labels-und-uuid.html">Labels &amp; UUID</a>
<a href="mount-optionen-und-sicherheit.html">Mountâ€‘Optionen &amp; Sicherheit</a>
<a href="dateisystem-attribute.html">Dateisystemâ€‘Attribute</a>
<a href="tmpfs-und-bind-mounts.html">tmpfs &amp; Bindâ€‘Mounts</a>
</nav>
</div>
</aside>
<article class="content">
<div class="card block"><h3>Lernziele</h3><div class="card-body"><ul><li>Inodeâ€‘Konzept, Hardâ€‘ vs. Symlinks verstehen.</li></ul></div></div>
<div class="card block"><h3>Cheatsheet</h3><div class="card-body"><pre><code>ln file hardlink
ln -s target symlink
stat file
</code></pre></div></div>
<div class="card block"><h3>Theorie</h3><div class="card-body">
<ul>
<li><strong>Inode:</strong> Metadaten (Owner, Mode, Timestamps, GrÃ¶ÃŸe, Blockzeiger), aber nicht der Dateiname.</li>
<li><strong>Hardlink:</strong> Weitere Verzeichnisâ€‘EintrÃ¤ge, die auf denselben Inode zeigen. Gleichwertig zum Original.</li>
<li><strong>Symlink:</strong> Separater Inode mit Pfadreferenz (Text). Kann ins Leere zeigen (â€danglingâ€œ).</li>
<li><strong>Linkâ€‘Count:</strong> <code>stat</code> zeigt die Anzahl von Hardlinks auf einen Inode.</li>
<li><strong>Grenzen:</strong> Hardlinks nur innerhalb desselben Dateisystems, nicht auf Verzeichnisse (auÃŸer SpezialfÃ¤lle).</li>
</ul>
</div></div>
<div class="card block"><h3>Theorie (Vertiefung)</h3><div class="card-body"><ul>
<li><strong>Dateiname â‰  Datei:</strong> Namen liegen in Verzeichnissen; der Inode reprÃ¤sentiert die Datei. LÃ¶schen entfernt nur den Verzeichniseintrag.</li>
<li><strong>Verzeichnisse:</strong> besitzen mind. 2 Links (<code>.</code> und Eintrag in Eltern <code>..</code>). <code>st_nlink</code> zÃ¤hlt Unterverzeichnisse+2.</li>
<li><strong>Timestamps:</strong> <code>atime</code>, <code>mtime</code>, <code>ctime</code> (Metadatenâ€‘Ã„nderung, nicht â€creationâ€œ). Moderne FS haben <code>crtime</code> optional.</li>
<li><strong>Reflinks vs. Hardlinks:</strong> Reflinks (CoW, z. B. XFS/Btrfs) teilen DatenblÃ¶cke copyâ€‘onâ€‘write, Hardlinks teilen den gleichen Inode.</li>
<li><strong>SymlinkauflÃ¶sung:</strong> Kernel folgt Symlinks bis zu einem Limit; absolute vs. relative Ziele beachten.</li>
</ul></div></div>
<div class="card block"><h3>Praxis</h3><div class="card-body"><pre><code># Hardâ€‘ und Symlinks anlegen
ln original.txt kopie.hl
ln -s /var/log/syslog syslog.link

# Eigenschaften prÃ¼fen
ls -li original.txt kopie.hl syslog.link
stat original.txt

# Datei lÃ¶schen: Inhalt bleibt bis letzter Hardlink entfernt ist
rm original.txt   # kopie.hl zeigt weiterhin auf die Daten

# Nach Inode suchen
stat kopie.hl | awk '/Inode/{print $2}'
find . -xdev -inum INODE -ls
</code></pre></div></div>
<div class="card block"><h3>Praxis (Fortgeschritten)</h3><div class="card-body"><pre><code># Inodes zÃ¤hlen / Inodeâ€‘ErschÃ¶pfung erkennen
df -i

# Alle Hardlinks zu einer Datei finden
find / -xdev -samefile kopie.hl -printf '%i %p\n' 2&gt;/dev/null

# Reflink (CoW) statt vollstÃ¤ndiger Kopie, wenn unterstÃ¼tzt (XFS/Btrfs)
cp --reflink=auto groÃŸe_datei img_copy

# Symlink atomar aktualisieren (Downtime minimal)
ln -sfn /opt/app/releases/2024-10-01 /opt/app/current

# Dangling Symlinks aufspÃ¼ren
find /path -xtype l -print

# Tar/Backup: Symlinks nicht dereferenzieren
tar -cf backup.tar --no-dereference /pfad
</code></pre></div></div>
<div class="card block"><h3>Best Practices</h3><div class="card-body"><ul>
<li><strong>Symlinks fÃ¼r Pfadumleitungen:</strong> Stabilere Pfade/KompatibilitÃ¤tsschichten bereitstellen.</li>
<li><strong>Hardlinks sparsam:</strong> Verwirrung vermeiden; fÃ¼r Deduplizierung/Snapshots gezielt nutzen.</li>
<li><strong>Backups beachten:</strong> Tools sollen Links korrekt behandeln (Optionen fÃ¼r Symlinks/Hardlinks prÃ¼fen).</li>
</ul></div></div>
<div class="card block"><h3>Sicherheit</h3><div class="card-body"><ul>
<li><strong>Symlinkâ€‘Race vermeiden:</strong> Beim Schreiben in weltâ€‘schreibbare Verzeichnisse (z. B. <code>/tmp</code>) sichere Patterns nutzen (<code>mktemp</code>, O_NOFOLLOW).</li>
<li><strong>Sticky Bit in /tmp:</strong> SchÃ¼tzt vor unbefugtem LÃ¶schen fremder Dateien in 1777â€‘Verzeichnissen.</li>
<li><strong>Backups:</strong> Symlinks nicht ungewollt dereferenzieren (<code>--no-dereference</code>), um Pfadâ€‘SprÃ¼nge zu verhindern.</li>
<li><strong>Chroot/Container:</strong> Relative Symlinks bevorzugen, damit Pfade im Jail gÃ¼ltig bleiben.</li>
</ul></div></div>
<div class="card block"><h3>Erweitertes Cheatsheet</h3><div class="card-body"><pre><code># Symlinkziel anzeigen/Ã¤ndern
readlink -f syslog.link
ln -sfn /neuer/pfad syslog.link   # atomar ersetzen

# Hardlinks zÃ¤hlen
find . -xdev -samefile kopie.hl | wc -l

# Symlinks folgen oder nicht
cp -a      # bewahrt Symlinks
cp -L      # folgt Symlinks (kopiert Ziel)
</code></pre></div></div>
<div class="card block"><h3>Fehlersuche</h3><div class="card-body"><ul>
<li><strong>Datei gelÃ¶scht aber belegt:</strong> <code>lsof +L1</code> zeigt offene, gelÃ¶schte Dateien; Dienst neu starten, um Platz freizugeben.</li>
<li><strong>Inodes alle:</strong> Viele kleine Dateien; mit <code>df -i</code> checken, Verursacher suchen und aufrÃ¤umen.</li>
<li><strong>Symlinkâ€‘Schleifen:</strong> <code>find -L</code> bricht Schleifen, Logs prÃ¼fen; Ziele korrigieren.</li>
<li><strong>Operation not permitted / Crossâ€‘device:</strong> Hardlinks gehen nicht Ã¼ber Dateisystemgrenzen; stattdessen Symlink/Reflink.</li>
</ul></div></div>
</article></div>
<div class="card block"><h3>Ãœbungen</h3><div class="card-body"><ol>
<li>Erstelle 2 Hardlinks auf eine Datei und demonstriere den unverÃ¤nderten Inode bei Umbenennung/LÃ¶schen.</li>
<li>Lege Symlinks mit relativen und absoluten Pfaden an und beobachte das Verhalten nach Verschiebung.</li>
<li>Finde alle Hardlinks zu einer Datei mittels <code>-samefile</code> und verifiziere die Linkâ€‘Anzahl.</li>
</ol></div></div>
<div class="card block"><h3>Weitere Ãœbungen</h3><div class="card-body"><ol>
<li>Demonstriere â€deleted but openâ€œ: Erzeuge groÃŸe Logdatei, lÃ¶sche sie wÃ¤hrend ein Prozess schreibt, beobachte <code>lsof +L1</code>.</li>
<li>Vergleiche Zeit/Platz von Kopie vs. Reflink auf XFS oder Btrfs (<code>cp --reflink=auto</code>).</li>
<li>Erzeuge einen Symlinkâ€‘Loop im Lab und zeige, wie Tools darauf reagieren (<code>find -L</code>, <code>rsync -a</code>).</li>
</ol></div></div>
<div class="card block"><h3>ZusÃ¤tzliche PrÃ¼fungsfragen</h3><div class="card-body"><ol>
<li>Warum kÃ¶nnen Hardlinks nicht Ã¼ber Dateisystemgrenzen hinweg erstellt werden?</li>
<li>Wie unterscheidet <code>ls -l</code> eine regulÃ¤re Datei, einen Hardlink und einen Symlink?</li>
<li>Welche Auswirkungen hat das LÃ¶schen des â€Originalsâ€œ bei Hardlinkâ€‘Szenarien?</li>
<li>Welche Unterschiede bestehen zwischen <code>mtime</code>, <code>ctime</code> und <code>atime</code>?</li>
<li>Wann sind Reflinks sinnvoll und wie unterscheiden sie sich von Hardlinks?</li>
</ol></div></div>
<div class="card" id="progressWidget"><div class="card-body"><h3>Kapitel abschlieÃŸen</h3><p class="muted">Hake dieses Kapitel als erledigt ab. Dein Fortschritt wird nur lokal im Browser gespeichert.</p><label class="checkbox"><input id="pageComplete" type="checkbox"/> Ich habe dieses Kapitel verstanden</label><p><a href="../../lpic-1/fortschritt.html">Zu meinem Fortschritt</a></p></div></div><div class="card"><div class="card-body"><h3>Vertiefung &amp; Praxis</h3><p><strong>Vertiefung:</strong> Wichtige Praxisaspekte und PrÃ¼fungsbezug.</p>
<ul><li>Relevante Manpages, typische Optionen und Nebeneffekte.</li><li>PraxisÃ¼bung in einer frischen VM; Ã„nderungen reproduzierbar dokumentieren.</li><li>PrÃ¼fungsszenarien mit Stolpersteinen und Zeitsparâ€‘Tricks.</li></ul></div></div><div class="card"><div class="card-body"><h3>Checkliste â€“ schneller Durchblick</h3>
<ul>
<li>Relevante Logdateien geprÃ¼ft? (<code>journalctl</code>, <code>/var/log/*</code>)</li>
<li>Manpage/--help gelesen und Option bewusst gewÃ¤hlt?</li>
<li>Rechte/Ownership/SELinux/AppArmor berÃ¼cksichtigt?</li>
<li>Distribution &amp; Version: gleiches Verhalten verifiziert?</li>
</ul>
</div></div><div class="card"><div class="card-body"><h3>PrÃ¼fungsfragen (MC)</h3><h3>Quiz â€“ Selbsttest</h3><div class="card"><div class="card-body"><p><strong>Frage:</strong> Welche Manpage zeigt Synopsis &amp; Optionen eines Befehls?</p><ol><li><strong>A.</strong> info</li><li><strong>B.</strong> help</li><li><strong>C.</strong> man</li><li><strong>D.</strong> what</li></ol><details><summary>LÃ¶sung anzeigen</summary><p><strong>Richtig:</strong> C. man ist Standardreferenz.</p></details></div></div></div></div><div class="card"><div class="card-body"><h3>Optionenâ€‘Atlas (Kernbefehle)</h3><table><tr><th>Kommando</th><th>Wichtige Optionen</th></tr><tr><td><code>man</code></td><td>man 1 chmod; man -k KEYWORD; /Suchbegriff; n weiter</td></tr>
<tr><td><code>help</code></td><td>Bash builtins: help test; type zeigt Herkunft</td></tr>
<tr><td><code>info</code></td><td>Detailierte Doku via Info-Seiten</td></tr></table></div></div><div class="card"><div class="card-body"><h3>Szenarien aus der Praxis</h3><ul><li>Manpages effektiv: SYNOPSIS â†’ Optionen â†’ EXAMPLES; eigene Notizen ans Ende der Seite.</li>
<li>Vor Ã„nderung: Backup der Konfig und spÃ¤ter diff zum Vergleichen.</li>
<li>Alle Schritte in Readme im Repo dokumentieren (Wiederholbarkeit).</li></ul></div></div><div class="card"><div class="card-body"><h3>Diagnose-Flow (schneller Pfad zur LÃ¶sung)</h3><ol><li>Reproduktion in frischer VM mÃ¶glich?</li>
<li>Ã„nderung minimal &amp; dokumentiert?</li>
<li>Fallback/Backoutâ€‘Plan vorhanden?</li>
<li>Securityâ€‘Implikationen bedacht?</li></ol></div></div><div class="card"><div class="card-body"><h3>Erweiterte Ãœbungen</h3><p>Bearbeite die Aufgaben, dokumentiere die Schritte und vergleiche die Ergebnisse mit den Erwartungen. Nutze eine frische VM fÃ¼r reproduzierbare Ergebnisse.</p><ol><li>Manpages effektiv: SYNOPSIS â†’ Optionen â†’ EXAMPLES; eigene Notizen ans Ende der Seite. â€“ <em>liefere Befehle, BegrÃ¼ndung und Nachweise (Logs/Outputs)</em>.</li><li>Vor Ã„nderung: Backup der Konfig und spÃ¤ter diff zum Vergleichen. â€“ <em>liefere Befehle, BegrÃ¼ndung und Nachweise (Logs/Outputs)</em>.</li><li>Alle Schritte in Readme im Repo dokumentieren (Wiederholbarkeit). â€“ <em>liefere Befehle, BegrÃ¼ndung und Nachweise (Logs/Outputs)</em>.</li></ol></div></div><div class="card"><div class="card-body"><h3>Cheatsheet â€“ erweitert</h3><pre><code># NÃ¼tzliche Helfer
man -k backup
type chmod
info coreutils 'File permissions'</code></pre></div></div><div class="card" id="prevnext"><div class="card-body"><h3>Weiter navigieren</h3><p><a href="fhs.html" rel="prev">â† Vorherige Seite</a> Â· <a href="labels-und-uuid.html" rel="next">NÃ¤chste Seite â†’</a></p></div></div></main>
<footer class="site-footer"><div class="container"><span>Â© Linux Lernportal</span></div></footer>
</body>
</html>
