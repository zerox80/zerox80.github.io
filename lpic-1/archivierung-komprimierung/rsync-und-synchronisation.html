<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>rsync &amp; Synchronisation – LPIC-1</title>
<link href="../../assets/css/style.css" rel="stylesheet"/>
<script defer="" src="../../assets/js/main.js"></script>
<meta content="rsync &amp; Synchronisation – LPIC-1" property="og:title"/><meta content="summary" name="twitter:card"/></head>
<body>
<header class="site-header">
<div class="container">
<h1>Linux Lernportal</h1>
<nav class="top-nav">
<a href="../../index.html">Start</a>
<a class="active" href="../index.html">LPIC-1</a>
<a class="disabled" href="#" title="Bald verfügbar">LPIC-2</a>
<a class="disabled" href="#" title="Bald verfügbar">LPIC-3</a>
<a href="../../search.html">Suche</a><a href="../../lpic-1/glossar.html">Glossar</a><button class="btn" id="themeToggle">🌓</button>
</nav>
</div>
</header>
<main class="container">
<div class="breadcrumbs"><a href="../../index.html">Start</a> · <a href="../index.html">LPIC-1</a> · <a href="../archivierung-komprimierung.html">Archivierung &amp; Komprimierung</a> · rsync</div>
<h2>rsync &amp; Synchronisation</h2>
<p class="muted">Effiziente Dateiübertragung lokal/remot mit Delta-Transfer und Filtern.</p>
<div class="layout">
<aside class="sidebar">
<div class="card" style="margin-bottom:12px"><h3>LPIC-1 Themen</h3><div class="card-body"><nav class="toc">
<a href="../grundlagen-linux.html">Grundlagen &amp; Philosophien</a>
<a href="../dateisysteme-fhs.html">Dateisysteme &amp; FHS</a>
<a href="../berechtigungen-acls.html">Berechtigungen &amp; ACLs</a>
<a href="../paketverwaltung.html">Paketverwaltung</a>
<a href="../prozesse.html">Prozesse &amp; Systemd</a>
<a href="../benutzer-gruppen.html">Benutzer &amp; Gruppen</a>
<a href="../netzwerkgrundlagen.html">Netzwerkgrundlagen</a>
<a href="../shells-scripting.html">Shells &amp; Scripting</a>
<a class="active" href="../archivierung-komprimierung.html">Archivierung &amp; Komprimierung</a>
<a href="../systemstart-boot.html">Systemstart &amp; Boot</a>
<a href="../hardware-geraete.html">Hardware &amp; Geräte</a>
</nav></div></div>
<div class="card"><h3>Unterthemen</h3><div class="card-body"><nav class="toc">
<a href="tar-grundlagen.html">tar-Grundlagen</a>
<a href="kompressionsverfahren.html">Kompressionsverfahren</a>
<a class="active" href="rsync-und-synchronisation.html">rsync &amp; Synchronisation</a>
<a href="backup-strategien.html">Backup-Strategien</a>
<a href="inkrementell-und-differenziell.html">Inkrementell &amp; Differenziell</a>
</nav></div></div>
</aside>
<article class="content">
<div class="card block"><h3>Lernziele</h3><div class="card-body"><ul>
<li>rsync-Optionen verstehen (<code>-a</code>, <code>-v</code>, <code>-h</code>, <code>--delete</code>, <code>--exclude</code>).</li>
<li>SSH-Transport und Bandbreitenlimit nutzen.</li>
<li>Snapshots/Hardlinks (via <code>--link-dest</code>) für inkrementelle Backups.</li>
</ul></div></div>
<div class="card block"><h3>Grundlagen</h3><div class="card-body">
<pre><code># Lokale Synchronisation
rsync -avh --delete src/ dst/

# Remote via SSH
rsync -avh -e ssh --progress src/ user@host:/backup/src/

# Excludes
rsync -avh --exclude '.git/' --exclude '*.tmp' project/ /backup/project/

# Bandbreite &amp; Kompression
rsync -avh --bwlimit=5m -z src/ remote:/dst/

# Inkrementell (Hardlink-Snapshots)
rsync -avh --delete --link-dest=/snap/prev /data/ /snap/current/
</code></pre>
</div></div>
<div class="card block"><h3>Cheatsheet</h3><div class="card-body">
<pre><code>rsync -navh src/ dst/   # Dry-Run
rsync --itemize-changes # Änderungen auflisten
</code></pre>
</div></div>
<div class="card block"><h3>Übungen</h3><div class="card-body"><ol>
<li>Spiegle ein Verzeichnis inkl. Excludes; prüfe vorher mit Dry-Run.</li>
<li>Lege zwei Snapshots mit <code>--link-dest</code> an und zeige Platzersparnis.</li>
</ol></div></div>
<div class="card block"><h3>Prüfungsfragen</h3><div class="card-body"><ol>
<li>Wozu dient <code>--delete</code> und welche Risiken hat es?</li>
<li>Wie realisierst du inkrementelle Backups mit rsync ohne tar?</li>
</ol></div></div>
<div class="card block"><h3>Theorie</h3><div class="card-body">
<ul>
<li><strong>Delta-Algorithmus:</strong> Nur Unterschiede (Checksummen/Blöcke) werden übertragen → effizient bei großen Dateien.</li>
<li><strong>Archivmodus <code>-a</code>:</strong> Entspricht <code>-rlptgoD</code> (rekursiv, Links, Permissions, Times, Group, Owner, Devices).</li>
<li><strong>Schrägstrich-Semantik:</strong> <code>src/</code> kopiert den Inhalt, <code>src</code> das Verzeichnis selbst.</li>
<li><strong>Metadaten:</strong> ACLs und xattrs mit <code>--acls</code> und <code>--xattrs</code> (Unterstützung abhängig vom Ziel).</li>
</ul>
</div></div>
<div class="card block"><h3>Praxis</h3><div class="card-body">
<pre><code># Filterdateien nutzen (wiederverwendbar)
rsync -avh --delete --exclude-from=excludes.txt /data/ /backup/data/

# Include/Exclude-Kombination
rsync -avh \
  --include='*/' --include='*.conf' --exclude='*' \
  /etc/ /backup/etc-confs/

# Über SSH mit spezifischen Optionen
rsync -avh -e 'ssh -i /root/key -o Compression=yes' /data/ root@host:/backup/data/

# Rechte, ACLs, xattrs bewahren
rsync -a --acls --xattrs /srv/ root@host:/srv/

# Bandbreite limitieren &amp; Kompression
rsync -avh --bwlimit=10m -z --partial /large/ remote:/large/

# Trockendurchlauf und detaillierte Änderungen
rsync -navh --delete --itemize-changes src/ dst/
</code></pre>
</div></div>
<div class="card block"><h3>Best Practices</h3><div class="card-body"><ul>
<li><strong>Dry-Run zuerst:</strong> Mit <code>-n</code> und <code>--itemize-changes</code> prüfen, vor allem bei <code>--delete</code>.</li>
<li><strong>Trailing slash korrekt setzen:</strong> Inhalt vs. Verzeichnis beachten, um doppelte Verzeichnisse zu vermeiden.</li>
<li><strong>Transportsicherheit:</strong> SSH‑Optionen (Schlüssel, Kompression) und begrenzte Benutzerrechte verwenden.</li>
<li><strong>Snapshots:</strong> Für Backup‑Historie <code>--link-dest</code> mit datierten Zielpfaden kombinieren.</li>
</ul></div></div>
<div class="card block"><h3>Erweitertes Cheatsheet</h3><div class="card-body"><pre><code># Itemize-Codes Beispiel
# &gt;f.st...... file.txt   # übertragene Datei, Zeitstempel geändert

# Hardlink-Snapshots
rsync -a --delete --link-dest=/snap/prev /data/ /snap/current/

# Nur geänderte *.log synchronisieren
rsync -av --include='*/' --include='*.log' --exclude='*' src/ dst/

# ACL/XATTR beachten
rsync -aAX  # Kurzform: -A (ACL), -X (xattrs)
</code></pre></div></div>
<div class="card block"><h3>Weitere Übungen</h3><div class="card-body"><ol>
<li>Erstelle eine <code>excludes.txt</code> und führe einen Dry‑Run mit <code>--delete</code> durch. Analysiere die Itemize‑Ausgabe.</li>
<li>Baue zwei datierte Snapshots mit <code>--link-dest</code> und zeige die Platzersparnis mit <code>du -sh</code>.</li>
<li>Synchronisiere große Dateien über WAN mit Bandbreitenlimit und Resumes (<code>--partial</code>).</li>
</ol></div></div>
<div class="card block"><h3>Zusätzliche Prüfungsfragen</h3><div class="card-body"><ol>
<li>Welche Optionen umfasst <code>-a</code> und wofür steht jede einzelne?</li>
<li>Wie unterscheidet sich das Verhalten von <code>src/</code> und <code>src</code>?</li>
<li>Wie kombinierst du <code>--link-dest</code> mit datierten Zielverzeichnissen für Snapshots?</li>
</ol></div></div>
</article>
</div>
<div class="card" id="progressWidget"><div class="card-body"><h3>Kapitel abschließen</h3><p class="muted">Hake dieses Kapitel als erledigt ab. Dein Fortschritt wird nur lokal im Browser gespeichert.</p><label class="checkbox"><input id="pageComplete" type="checkbox"/> Ich habe dieses Kapitel verstanden</label><p><a href="../../lpic-1/fortschritt.html">Zu meinem Fortschritt</a></p></div></div><div class="card"><div class="card-body"><h3>Vertiefung &amp; Praxis</h3><p><strong>Vertiefung:</strong> Archivierung, Kompression und Synchronisation.</p>
<pre><code># tar: Archiv erstellen/entpacken
# c=create, x=extract, v=verbose, f=file, z=gzip, J=xz
 tar czvf backup.tgz /etc /home
 tar xzvf backup.tgz -C /restore

# Inkrementelle Backups mit tar-Snapshots
 tar --listed-incremental=snap.snar -czf full.tgz /home
 tar --listed-incremental=snap.snar -czf inc-1.tgz /home

# rsync: Synchronisierung &amp; inkrementelle Kopie
 rsync -a --delete /src/ user@host:/dst/
 rsync -a --link-dest=/dst/prev /src/ /dst/current

# Kompression
 gzip -9 datei; bzip2 datei; xz -T0 datei; zstd -19 datei
</code></pre>
<h4>Strategien</h4><ul><li>3-2-1-Regel: 3 Kopien, 2 unterschiedliche Medien, 1 Offsite.</li><li>Rotation: Grandfather‑Father‑Son oder Tower‑of‑Hanoi.</li><li>Integritätsprüfung: <code>tar -tvf</code>, Checksums (<code>sha256sum</code>), <code>rsync --checksum</code>.</li></ul>
<h4>Fehlerbilder</h4><ul><li>Tar-Pfade relativ vs. absolut (Extraktion mit <code>-C</code> und Vorsicht bei <code>/</code>).</li><li><code>--delete</code> zerstört Ziel → nur einsetzen, wenn gewollt und getestet.</li></ul></div></div><div class="card"><div class="card-body"><h3>Checkliste – schneller Durchblick</h3>
<ul>
<li>Relevante Logdateien geprüft? (<code>journalctl</code>, <code>/var/log/*</code>)</li>
<li>Manpage/--help gelesen und Option bewusst gewählt?</li>
<li>Rechte/Ownership/SELinux/AppArmor berücksichtigt?</li>
<li>Distribution &amp; Version: gleiches Verhalten verifiziert?</li>
</ul>
</div></div><div class="card"><div class="card-body"><h3>Prüfungsfragen (MC)</h3><h3>Quiz – Selbsttest</h3><div class="card"><div class="card-body"><p><strong>Frage:</strong> Welche Manpage zeigt Synopsis &amp; Optionen eines Befehls?</p><ol><li><strong>A.</strong> info</li><li><strong>B.</strong> help</li><li><strong>C.</strong> man</li><li><strong>D.</strong> what</li></ol><details><summary>Lösung anzeigen</summary><p><strong>Richtig:</strong> C. man ist Standardreferenz.</p></details></div></div></div></div><div class="card"><div class="card-body"><h3>Optionen‑Atlas (Kernbefehle)</h3><table><tr><th>Kommando</th><th>Wichtige Optionen</th></tr><tr><td><code>tar</code></td><td>c/x/v/f/z/J; --listed-incremental=SNAP; -C Verzeichnis; --exclude</td></tr>
<tr><td><code>rsync</code></td><td>-a Archivmodus; --delete; --checksum; --link-dest Hardlinks für inkrementelle Backups; -e ssh</td></tr>
<tr><td><code>gzip/bzip2/xz/zstd</code></td><td>-1...-9 Kompressionsgrad; xz -T0 Threads; zstd -19 starke Kompression</td></tr>
<tr><td><code>sha256sum</code></td><td>Integritätsprüfung; -c prüfen</td></tr>
<tr><td><code>cron/systemd-timers</code></td><td>Zeitgesteuerte Backups; systemd.timer zuverlässiger als @hourly-Cron in Sleep-Setups</td></tr></table></div></div><div class="card"><div class="card-body"><h3>Szenarien aus der Praxis</h3><ul><li>Tägliche inkrementelle Homes, wöchentliche Vollbackups (3‑2‑1‑Regel).</li>
<li>rsync --link-dest für platzsparende Snapshots mit Hardlinks.</li>
<li>Recovery‑Probe: Wiederherstellung stichprobenartig testen (Disaster‑Day).</li>
<li>Offsite‑Sync via SSH + Bandbreitenlimit (--bwlimit) in Nachtstunden.</li></ul></div></div><div class="card"><div class="card-body"><h3>Diagnose-Flow (schneller Pfad zur Lösung)</h3><ol><li>Quelle erreichbar &amp; konsistent? (mount, df, dmesg)</li>
<li>Tar‑Optionen korrekt (c/z/J/f)?</li>
<li>rsync‑Dry‑Run ohne Überraschungen? (--dry-run)</li>
<li>Prüfsumme passt? (sha256sum -c)</li></ol></div></div><div class="card"><div class="card-body"><h3>Erweiterte Übungen</h3><p>Bearbeite die Aufgaben, dokumentiere die Schritte und vergleiche die Ergebnisse mit den Erwartungen. Nutze eine frische VM für reproduzierbare Ergebnisse.</p><ol><li>Tägliche inkrementelle Homes, wöchentliche Vollbackups (3‑2‑1‑Regel). – <em>liefere Befehle, Begründung und Nachweise (Logs/Outputs)</em>.</li><li>rsync --link-dest für platzsparende Snapshots mit Hardlinks. – <em>liefere Befehle, Begründung und Nachweise (Logs/Outputs)</em>.</li><li>Recovery‑Probe: Wiederherstellung stichprobenartig testen (Disaster‑Day). – <em>liefere Befehle, Begründung und Nachweise (Logs/Outputs)</em>.</li><li>Offsite‑Sync via SSH + Bandbreitenlimit (--bwlimit) in Nachtstunden. – <em>liefere Befehle, Begründung und Nachweise (Logs/Outputs)</em>.</li></ol></div></div><div class="card"><div class="card-body"><h3>Cheatsheet – erweitert</h3><pre><code># tar &amp; rsync
tar --listed-incremental=snap.snar -czf full.tgz /home
tar --listed-incremental=snap.snar -czf inc-1.tgz /home
rsync -a --delete --link-dest=/b/snap-001 /a/ /b/snap-002
sha256sum -c sums.txt</code></pre></div></div><div class="card" id="prevnext"><div class="card-body"><h3>Weiter navigieren</h3><p><a href="kompressionsverfahren.html" rel="prev">← Vorherige Seite</a> · <a href="tar-grundlagen.html" rel="next">Nächste Seite →</a></p></div></div></main>
<footer class="site-footer"><div class="container"><span>© Linux Lernportal</span></div></footer>
</body>
</html>
